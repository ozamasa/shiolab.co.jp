---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { microcms } from "../../lib/microcms";

const res = microcms
  ? await microcms.getList({
      endpoint: "articles",
      queries: { limit: 100, orders: "-publishedAt" },
    })
  : { contents: [] };

const articles = res.contents ?? [];
---

<BaseLayout title="記事一覧｜SHIOLAB" description="記事一覧">
  <section class="card">
    <h1>記事一覧</h1>
  </section>

  <section class="grid">
    {articles.map((a) => (
      <article class="card">
        <h3>
          <a href={`/articles/${a.id}/`}>{a.title}</a>
        </h3>
        {a.description ? <p>{a.description}</p> : null}
      </article>
    ))}
  </section>
</BaseLayout>